eval(atob('OygoKSA9PiB7CiAgICBsZXQgaGFzTW91c2UgPSB0cnVlCgogICAgYWRkS2V5Q29tYm9MaXN0ZW5lcignICsgKyAnLCAoKSA9PiB7CiAgICAgICAgbGV0IGV4YW1wbGVSb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmV4YW1wbGUnKQoKICAgICAgICBpZiAoZXhhbXBsZVJvb3QpIHJldHVybiBleGFtcGxlUm9vdC5yZW1vdmUoKQoKICAgICAgICBpZiAoIWhhc01vdXNlKSByZXR1cm4KCiAgICAgICAgbW91bnQoKQogICAgfSkKCiAgICBmdW5jdGlvbiBkZXN0cm95KCkgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5leGFtcGxlJyk/LnJlbW92ZSgpCiAgICB9CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHsKICAgICAgICBoYXNNb3VzZSA9IHRydWUKICAgICAgICBkZXN0cm95KCkKICAgIH0pCgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHsKICAgICAgICBoYXNNb3VzZSA9IGZhbHNlCiAgICAgICAgZGVzdHJveSgpCiAgICB9KQoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoKSA9PiB7CiAgICAgICAgZGVzdHJveSgpCiAgICB9KQoKICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICBpZiAoaGFzTW91c2UpIHJldHVybgoKICAgICAgICBkZXN0cm95KCkKICAgIH0sIDEwMCkKCiAgICBhc3luYyBmdW5jdGlvbiBtb3VudCgpIHsKICAgICAgICBsZXQgdXNlcnMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICBsZXQgdG9kb3MgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3RvZG9zJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICBsZXQgdXNlcnNCeUlkID0gdXNlcnMucmVkdWNlKChhY2MsIHVzZXIpID0+ICh7IC4uLmFjYywgW3VzZXIuaWRdOiB1c2VyIH0pLCB7fSkKCiAgICAgICAgd2luZG93Ll9fVVNFUl9MSVNUX0lURU1fQ0xJQ0tfSEFORExFUl9fID0gZXZlbnQgPT4gewogICAgICAgICAgICBzZXRTZWxlY3RlZFVzZXIoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnVzZXJJZCkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkVXNlcih1c2VySWQpIHsKICAgICAgICAgICAgbGV0IHVzZXIgPSB1c2Vyc0J5SWRbdXNlcklkXQogICAgICAgICAgICBsZXQgdXNlclRvZG9zID0gdG9kb3MuZmlsdGVyKHRvZG8gPT4gdG9kby51c2VySWQgPT09IHVzZXIuaWQpCiAgICAgICAgICAgIGxldCBzZWxlY3RlZFVzZXJOYW1lID0gZXhhbXBsZVJvb3QucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXVzZXItZGV0YWlscycpCiAgICAgICAgICAgIGxldCBzZWxlY3RlZFVzZXJUb2RvcyA9IGV4YW1wbGVSb290LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC11c2VyLXRvZG9zJykKCiAgICAgICAgICAgIHJlZnJlc2hVc2VyTGlzdCh1c2VySWQpCgogICAgICAgICAgICBzZWxlY3RlZFVzZXJOYW1lLmlubmVySFRNTCA9IHByZSh1c2VyKQogICAgICAgICAgICBzZWxlY3RlZFVzZXJUb2Rvcy5pbm5lckhUTUwgPSB1c2VyVG9kb3MubWFwKHRvZG8gPT4gYDxsaT4ke3ByZSh0b2RvKX08L2xpPmApLmpvaW4oJ1xuJykKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hVc2VyTGlzdChzZWxlY3RlZFVzZXJJZCkgewogICAgICAgICAgICBsZXQgaXRlbXMgPSBbLi4uZXhhbXBsZVJvb3QucXVlcnlTZWxlY3RvcignLnVzZXItbGlzdCcpLmNoaWxkcmVuXQoKICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgIGxldCBpc1NlbGVjdGVkID0gaXRlbS5kYXRhc2V0LnVzZXJJZCA9PT0gc2VsZWN0ZWRVc2VySWQKCiAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkgewogICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CgogICAgICAgIGxldCBleGFtcGxlUm9vdCA9IGZyb21IVE1MKGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhhbXBsZSI+CiAgICAgICAgICAgICAgICA8aGVhZGVyIGNsYXNzPSJoZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIEhlYWRlcgogICAgICAgICAgICAgICAgPC9oZWFkZXI+CiAgICAgICAgICAgICAgICA8YXNpZGUgY2xhc3M9ImFzaWRlIj4KICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InVzZXItbGlzdCI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7dXNlcnMubWFwKHVzZXIgPT4gYDxsaSBvbmNsaWNrPSJfX1VTRVJfTElTVF9JVEVNX0NMSUNLX0hBTkRMRVJfXyhldmVudCkiIGRhdGEtdXNlci1pZD0ke3VzZXIuaWR9PiR7cHJlKHVzZXIpfTwvbGk+YCkuam9pbignXG4nKX0KICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgPC9hc2lkZT4KICAgICAgICAgICAgICAgIDxtYWluPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlbGVjdGVkLXVzZXItZGV0YWlscyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJzZWxlY3RlZC11c2VyLXRvZG9zIj48L3VsPgogICAgICAgICAgICAgICAgPC9tYWluPgogICAgICAgICAgICAgICAgPGZvb3RlciBjbGFzcz0iZm9vdGVyIj4KICAgICAgICAgICAgICAgICAgICBGb290ZXIKICAgICAgICAgICAgICAgIDwvZm9vdGVyPgoKICAgICAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgICAgICAgICAuZXhhbXBsZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwOwogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjQyNDI0OwogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBncmlkOwogICAgICAgICAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiAnaGVhZGVyIGhlYWRlcicgJ2FzaWRlIG1haW4nICdmb290ZXIgZm9vdGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBhdXRvIDFmciBhdXRvOwogICAgICAgICAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDMycmVtIDFmcjsKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsKCiAgICAgICAgICAgICAgICAgICAgICAgICogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQtYXJlYTogaGVhZGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBhc2lkZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLWFyZWE6IGFzaWRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIG1haW4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC1hcmVhOiBtYWluOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdGVkLXVzZXItZGV0YWlscyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmUgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQtYXJlYTogZm9vdGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBwcmUgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBDb25zb2xhczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdWwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbGk6bm90KDpsYXN0LWNoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbGk6aG92ZXIgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsaS5zZWxlY3RlZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgYClbMF0KCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChleGFtcGxlUm9vdCkKCiAgICAgICAgc2V0U2VsZWN0ZWRVc2VyKHVzZXJzWzBdLmlkICsgJycpCgogICAgICAgIGZ1bmN0aW9uIHByZShvYmopIHsKICAgICAgICAgICAgcmV0dXJuIGA8cHJlPiR7SlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKS5yZXBsYWNlKC8iL2csICcnKX08L3ByZT5gCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmcm9tSFRNTChodG1sKSB7CiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQoKICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBodG1sLnRyaW0oKQoKICAgICAgICAgICAgcmV0dXJuIHRlbXAuY2hpbGRyZW4KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYWRkS2V5Q29tYm9MaXN0ZW5lcihjb21ibywgY2FsbGJhY2spIHsKICAgICAgICBsZXQga2V5cyA9IGNvbWJvLnNwbGl0KCcrJykKICAgICAgICBsZXQgc3RhcnRLZXkgPSBrZXlzLnNoaWZ0KCkKICAgICAgICBsZXQgY2hhaW5LZXlzID0gWy4uLmtleXNdCiAgICAgICAgbGV0IGlzTGlzdGVuaW5nID0gZmFsc2UKCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc3RhcnQoZXZlbnQpIHsKICAgICAgICAgICAgbGV0IGlzU3RhcnRLZXkgPSBldmVudC5rZXkgPT09IHN0YXJ0S2V5CgogICAgICAgICAgICBpZiAoIWlzU3RhcnRLZXkpIHJldHVybgoKICAgICAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSByZXR1cm4KCiAgICAgICAgICAgIGlzTGlzdGVuaW5nID0gdHJ1ZQoKICAgICAgICAgICAgY2hhaW5LZXlzID0gWy4uLmtleXNdCgogICAgICAgICAgICBhd2FpdCBjaGFpbigpCgogICAgICAgICAgICBpc0xpc3RlbmluZyA9IGZhbHNlCiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBjaGFpbigpIHsKICAgICAgICAgICAgbGV0IGtleSA9IGNoYWluS2V5cy5zaGlmdCgpCgogICAgICAgICAgICBpZiAoIWtleSkgcmV0dXJuIGNhbGxiYWNrKCkKCiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB3YWl0Rm9yS2V5KGtleSkKICAgICAgICAgICAgbGV0IHsgaXNEaWZmZXJlbnRLZXksIGhhc1RpbWVkT3V0IH0gPSByZXN1bHQKICAgICAgICAgICAgbGV0IGlzQ2hhaW5Ccm9rZW4gPSBpc0RpZmZlcmVudEtleSB8fCBoYXNUaW1lZE91dAoKICAgICAgICAgICAgaWYgKGlzQ2hhaW5Ccm9rZW4pIHJldHVybgoKICAgICAgICAgICAgcmV0dXJuIGNoYWluKCkKICAgICAgICB9CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBzdGFydCkKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiB3YWl0Rm9yS2V5KGtleSwgdGltZW91dCA9IDEwMDApIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBrZXkpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgaXNTYW1lS2V5OiB0cnVlIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyBpc0RpZmZlcmVudEtleTogdHJ1ZSB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoeyBoYXNUaW1lZE91dDogdHJ1ZSB9KSwgdGltZW91dCkKICAgICAgICB9KQogICAgfQp9KSgpCg=='))